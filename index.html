<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css">
    <title>title</title>
</head>
<body>
    

    <div class="parent">
        <button class="btn">Кнопка</button>
        <button class="btn">Кнопка</button>
    </div>
    <br>
    <button class="btn__add">Добавление кнопки</button>


    <div class="wrapper">
        <header class="header">
            <div class="constainer">
                <div class="header__body">
                    <p>/</p>
                    <div class="header__burger">
                        <span></span>
                    </div>
                    <nav class="header__menu">
                        <ul class="header__list">
                            <li>
                                <a href="" class="header__link">Главная</a>
                            </li>
                            <li>
                                <a href="" class="header__link">О нас</a>
                            </li>
                            <li>
                                <a href="" class="header__link">Контакты</a>
                            </li>
                            <li>
                                <a href="" class="header__link">Главная</a>
                            </li>
                            <li>
                                <a href="" class="header__link">О нас</a>
                            </li>
                            <li>
                                <a href="" class="header__link">Контакты</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div class="content">
        <div class="container">
            <div class="content__text">
                <p>The far-reaching consequences of globalization can sometimes be very obscure. Just like preeminent technological developments, globalization contributes to civilization as a whole but also inconveniences others. In terms of global trade, helps in reducing the isolation of poor countries by increasing specialization, it expands access to information through trade, increases the pace of operations in the commercial, technological and financial sectors. According to Oyekola (2018), “With globalization, more jobs can be created” (p. 86). These can be termed the positive effects of globalization.</p>
                <p>Be that as it may, “economic activities carried out by humans such as agriculture, construction, fossil fuel burning, solid waste generation, and mining are causing harm not only to human life but also to the environment” (Rashid, 2021), and can be termed as negative effects of globalization in different countries. The extraction of non-renewable and renewable natural resources leads to the degradation of the environment, destruction of habitats through deforestation and mining, increase in the gap between the rich and poor countries.</p>
            </div>
        </div>
    </div>
    </div>

    
    <div class="container">
        <ul class="container--tabs">
            <li class="tab tab--active">London</li>
            <li class="tab">New York</li>
            <li class="tab">Singapore</li>
        </ul>
    
        <div class="container--content">
            <div class="content content--active">
                <h2>London</h2>
                <p>LOREM IPSUM dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.</p>
                <p><img src="./assets/img/london.jpg" alt="london" width="396" /></p>
            </div>
            <div class="content">
                <h2>NYC</h2>
                <p>LOREM IPSUM dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.</p>
                <p><img src="./assets/img/nyc.jpg" alt="nyc" width="396" /></p>
            </div>
            <div class="content">
                <h2>Singapore</h2>
                <p>LOREM IPSUM dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor.</p>
                <p><img src="./assets/img/singapore.jpg" alt="singapore" width="396" /></p>
            </div>
        </div>
    </div> 

    <div class="slides">
        <img src="./assets/img/florence.jpg" alt="florence">
        <img src="./assets/img/london.jpg" alt="london">
        <img src="./assets/img/nyc.jpg" alt="nyc">
        <img src="./assets/img/singapore.jpg" alt="singapore">
    </div>
    <button class="btnRight">=></button>
    <button class="btnLeft"><=</button>


    <div class="wrap">
        <div data-spollers data-one-spoller class="block block_1">
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №1</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №2</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №3</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
        </div>
        <div data-spollers="650, min" class="block block_2">
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №4</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
        </div>
        <div data-spollers="800, max" class="block block_3">
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №5</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
            <div class="block__item">
                <button tabindex="-1" type="button" data-spoller class="block__title">Обычный спойлер №6</button>
                <div class="block__text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.</div>
            </div>
        </div>
    </div> 
    <div class="game">
        <div id="dino"></div>
        <div id="cactus"></div>
    </div>

    <script>

    const parent = document.querySelector('.parent');
    parent.addEventListener('click', function(e) {
        let targetItem = e.target;
        console.log(targetItem);
        if (targetItem.closest('.btn')) {
            targetItem.closest('.btn').classList.add('done');
            targetItem.innerHTML = "нажата"
        }
    });


    const buttonAdd = document.querySelector('.btn__add');
    buttonAdd.addEventListener('click', function(a) {
        parent.insertAdjacentHTML('beforeend', '<button class="btn">Кнопка</button>')
    })



    const linkItem = document.getElementsByClassName('header__burger')[0];
    console.log(linkItem)
    linkItem.addEventListener('click', function(e) {
        linkItem.classList.toggle('active');
        document.querySelector('.header__menu').classList.toggle('active');
        document.body.classList.toggle('lock');
    })



    const tabs = document.querySelectorAll(".tab");
    const contents = document.querySelectorAll(".content");
    for (let i = 0; i < tabs.length; i++) {
        tabs[i].addEventListener('click', (event) => {
            let tabsChildren = event.target.parentElement.children;
            for (let t = 0; t < tabsChildren.length; t++) {
                tabsChildren[t].classList.remove("tab--active");
            }
            tabs[i].classList.add("tab--active");
            let tabContentChildren = event.target.parentElement.nextElementSibling.children;
            for (let c = 0; c < tabContentChildren.length; c++) {
                tabContentChildren[c].classList.remove("content--active");
            }
            contents[i].classList.add("content--active");
        });
    }



    let btnRight = document.querySelector(".btnRight");
    let btnLeft = document.querySelector(".btnLeft"); 
    let slides = document.querySelectorAll("img");
    let i = 0;
    btnRight.addEventListener("click", function() {
        ++i
        if (i >= slides.length) {
            slides[i-1].classList.remove("block");
            i = 0;
            slides[i].classList.add("block");
        }
        else {
            slides[i-1].classList.remove("block");
            slides[i].classList.add("block");
        }
    })
    btnLeft.addEventListener("click", function() {
        --i
        if (i >= slides.length) {
            slides[i+1].classList.remove("block");
            i = 0;
            slides[i].classList.add("block");
        }
        else {
            slides[i+1].classList.remove("block");
            slides[i].classList.add("block");
        }
    })


    const spollersArray = document.querySelectorAll('[data-spollers]');
    if (spollersArray.length > 0) {
        const spollersRegular = Array.from(spollersArray).filter(function(item, index, self) {
            return !item.getAttribute('data-spollers').split(",")[0];
        });
        if (spollersRegular.length > 0) {
            initSpollers(spollersRegular);
        }
        const spollersMedia = Array.from(spollersArray).filter(function(item, index, self) {
            return item.getAttribute('data-spollers').split(",")[0];
        });
        if (spollersMedia.length > 0) {
            initSpollers(spollersMedia);
            const breakpointsArray = [];
            spollersMedia.forEach(item => {
                const params = item.dataset.spollers;
                const breakpoint = {};
                const paramsArray = params.split(", ");
                breakpoint.value = paramsArray[0];
                breakpoint.type = paramsArray[1];
                breakpoint.htmlitem = item;
                breakpointsArray.push(breakpoint);
            });
            let mediaQueries = breakpointsArray;
            mediaQueries.forEach(breakpoint => {
                
            });
        }
        function initSpollers(spollersArray, matchMedia = false) {
            spollersArray.forEach(spollersBlock => {
                spollersBlock = matchMedia ? spollersBlock.item : spollersBlock;
                if (matchMedia.matches || !matchMedia) {
                    spollersBlock.classList.add('_init');
                    initSpollerBody(spollersBlock);
                    spollersBlock.addEventListener('click', setSpollerAction);
                }
                else {
                    spollersBlock.classList.remove('_init');
                    initSpollerBody(spollersBlock, false);
                    spollersBlock.addEventListener('click', setSpollerAction);
                }
            });
        }
        function initSpollerBody(spollersBlock, hideSpollerBody = true) {
            const spollerTitles = spollersBlock.querySelectorAll('[data-spoller]');
            if (spollerTitles.length > 0) {
                spollerTitles.forEach(spollerTitle => {
                    if (hideSpollerBody) {
                        spollerTitle.removeAttribute('tabindex');
                        if (!spollerTitle.classList.contains('_active')) {
                            spollerTitle.nextElementSibling.hidden = true;
                        }
                    }
                    else {
                        spollerTitle.setAttribute('tabindex', '-1');
                        spollerTitle.nextElementSibling.hidden = false;
                    }
                });
            }
        }
        function setSpollerAction(e) {
            const el = e.target;
            const params = el.parentElement.parentElement.dataset.spollers.split(', ');
            if (params.length > 1) {
                let width = params[0];
                let type = params[1];

                let check = type == 'min' ? width >= window.innerWidth : width < window.innerWidth;
                if (check) { return }
            }
            if (el.hasAttribute('data-spoller') || el.closest('[data-spoller]')) {
                const spollerTitle = el.hasAttribute('data-spoller') ? el : el.closest('[data-spoller]');
                const spollersBlock = spollerTitle.closest('[data-spollers]');
                const oneSpoller = spollersBlock.hasAttribute('data-one-spoller') ? true : false;
                if (!spollersBlock.querySelectorAll('._slide').length) {
                    if (oneSpoller && spollerTitle.classList.contains('_active')) {
                        hideSpollerBody(spollersBlock);
                        return;
                    }
                    spollerTitle.classList.toggle('_active');
                    _slideToggle(spollerTitle.nextElementSibling, 500);
                }
                e.preventDefault();
            }
        }
        function hideSpollerBody(spollersBlock) {
            const spollerActiveTitle = spollersBlock.querySelector('[data-spoller]._active');
            if (spollerActiveTitle) {
                spollerActiveTitle.classList.remove('_active');
                _slideUp(spollerActiveTitle.nextElementSibling, 500);
            }
        }
    }
    let _slideUp = (target, duration = 500) => {
        if (!target.classList.contains('_slide')) {
            target.classList.add('_slide');
            target.style.transition.Property = 'height, margin, padding';
            target.style.transitionDuration = duration + 'ms';
            target.style.height = target.offsetHeight + 'px';
            target.offsetHeight;
            target.style.overflow = 'hidden';
            target.style.height = 0;
            target.style.padding.Top = 0;
            target.style.padding.Bottom = 0;
            target.style.margin.Top = 0;
            target.style.margin.Bottom = 0;
            window.setTimeout(() => {
                target.hidden = true;
                target.style.removeProperty('height');
                target.style.removeProperty('padding-top');
                target.style.removeProperty('padding-bottom');
                target.style.removeProperty('margin-top');
                target.style.removeProperty('margin-bottom');
                target.style.removeProperty('overflow');
                target.style.removeProperty('transition-duration');
                target.style.removeProperty('transition-property');
                target.classList.remove('_slide');
            }, duration);
        }
    }
    let _slideDown = (target, duration = 500) => {
        if (!target.classList.contains('_slide')) {
            target.classList.add('_slide');
            if (target.hidden) {
                target.hidden = false;
            }
            let height = target.offsetHeight;
            target.style.overflow = 'hidden';
            target.style.height = 0;
            target.style.paddingTop = 0;
            target.style.paddingBottom = 0;
            target.style.marginTop = 0;
            target.style.marginBottom = 0;
            target.offsetHeight;
            target.style.transitionProperty = 'height, margin, padding';
            target.style.transitionDuration = duration + 'ms';
            target.style.height = height + 'px';
            target.style.removeProperty('padding-top');
            target.style.removeProperty('padding-bottom');
            target.style.removeProperty('margin-top');
            target.style.removeProperty('margin-bottom');
            window.setTimeout(() => {
                target.style.removeProperty('height');
                target.style.removeProperty('overflow');
                target.style.removeProperty('transition-duration');
                target.style.removeProperty('transition-property');
                target.classList.remove('_slide');
            }, duration);
        }
    } 
    let _slideToggle = (target, duration = 500) => {
        if (target.hidden) {
            return _slideDown(target, duration);
        }
        else {
            return _slideUp(target, duration);
        }
    }

    function afterResize() {
        spollersArray.forEach(item => {
            let par = item.getAttribute('data-spollers').split(', ');
            if (par.length != 2) {return}
            let type = par[1];
            let width = par[0];
            let check = type == 'min' ? width >= window.innerWidth : width < window.innerWidth;
            if (check) {
                item.classList.remove('_init');
            }
            else {
                item.classList.add('_init');
            }
        })
    }

    window.addEventListener('resize', (e) => {
        afterResize()
    })

    afterResize()


    // const dino = document.getElementById('dino');
    // const cactus = document.getElementById('cactus');
    // document.addEventListener('keydown', function(event) {
    //     jump();
    // });
    // function jump() {
    //     if (dino.classList != 'jump') {
    //         dino.classList.add('jump');
    //     }
    //     setTimeout(function() {
    //         dino.classList.remove('jump')
    //     }, 300)
    // }
    // let isAlive = setInterval(function() {
    //     let dinoTop = parseInt(window.getComputedStyle(dino).getPropertyValue('top'));
    //     let cactusLeft = parseInt(window.getComputedStyle(cactus).getPropertyValue('left'));
    //     if (cactusLeft < 50 && cactusLeft > 0 && dinoTop >= 150) {
    //         alert('Game over')
    //     }
    // }, 10)


    </script>
</body>
</html>
